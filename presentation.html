<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BookShare - 서비스 플로우 발표자료</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #0f0f1a;
    color: #e8e8f0;
    overflow: hidden;
    height: 100vh;
  }

  .slide {
    display: none;
    width: 100vw;
    height: 100vh;
    padding: 60px 80px;
    position: relative;
    flex-direction: column;
    justify-content: center;
  }
  .slide.active { display: flex; }

  /* ── 페이지 번호 ── */
  .page-num {
    position: fixed;
    bottom: 30px;
    right: 40px;
    font-size: 14px;
    color: #555;
    font-weight: 300;
    z-index: 100;
  }

  /* ── 네비게이션 힌트 ── */
  .nav-hint {
    position: fixed;
    bottom: 30px;
    left: 40px;
    font-size: 13px;
    color: #444;
    font-weight: 300;
    z-index: 100;
  }

  /* ── 공통 타이틀 ── */
  .slide-label {
    font-size: 13px;
    font-weight: 500;
    color: #6c72cb;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 12px;
  }

  h1 {
    font-size: 52px;
    font-weight: 900;
    line-height: 1.3;
    margin-bottom: 20px;
  }

  h2 {
    font-size: 40px;
    font-weight: 700;
    margin-bottom: 30px;
    line-height: 1.3;
  }

  h3 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 16px;
    color: #a5a8f0;
  }

  .subtitle {
    font-size: 22px;
    font-weight: 300;
    color: #8888aa;
    line-height: 1.6;
    max-width: 700px;
  }

  .highlight { color: #7b7ff0; }
  .highlight-green { color: #4ecdc4; }
  .highlight-orange { color: #f0a04b; }
  .highlight-red { color: #f06b6b; }

  /* ── 그라데이션 텍스트 ── */
  .gradient-text {
    background: linear-gradient(135deg, #7b7ff0, #4ecdc4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* ── 카드 레이아웃 ── */
  .cards {
    display: flex;
    gap: 30px;
    margin-top: 20px;
    flex-wrap: wrap;
  }

  .card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    padding: 32px 28px;
    flex: 1;
    min-width: 220px;
    transition: transform 0.2s;
  }
  .card:hover { transform: translateY(-4px); }

  .card-icon {
    font-size: 40px;
    margin-bottom: 16px;
    display: block;
  }

  .card h3 {
    margin-bottom: 10px;
    font-size: 20px;
    color: #d0d0f0;
  }

  .card p {
    font-size: 15px;
    color: #8888aa;
    line-height: 1.6;
  }

  /* ── 플로우 차트 (세로) ── */
  .flow-vertical {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-top: 10px;
    max-width: 900px;
  }

  .flow-step {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    position: relative;
  }

  .flow-num {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #6c72cb, #4ecdc4);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 16px;
    color: #fff;
    flex-shrink: 0;
    position: relative;
    z-index: 2;
  }

  .flow-step:not(:last-child) .flow-num::after {
    content: '';
    position: absolute;
    top: 44px;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: calc(100% + 12px);
    background: rgba(108, 114, 203, 0.3);
    z-index: 1;
  }

  .flow-content {
    padding: 8px 0 28px 0;
    flex: 1;
  }

  .flow-content .step-title {
    font-size: 18px;
    font-weight: 700;
    color: #d8d8f8;
    margin-bottom: 4px;
  }

  .flow-content .step-desc {
    font-size: 14px;
    color: #7777aa;
    line-height: 1.5;
  }

  .flow-content .step-role {
    display: inline-block;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 6px;
    margin-bottom: 4px;
  }
  .role-admin { background: rgba(240,107,107,0.2); color: #f06b6b; }
  .role-owner { background: rgba(78,205,196,0.2); color: #4ecdc4; }
  .role-customer { background: rgba(240,160,75,0.2); color: #f0a04b; }

  /* ── 플로우 차트 (가로) ── */
  .flow-horizontal {
    display: flex;
    align-items: center;
    gap: 0;
    margin: 30px 0;
    flex-wrap: wrap;
    justify-content: center;
  }

  .flow-h-step {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 18px 22px;
    text-align: center;
    min-width: 130px;
  }

  .flow-h-step .step-label {
    font-size: 11px;
    color: #6c72cb;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }

  .flow-h-step .step-name {
    font-size: 15px;
    font-weight: 600;
    color: #d0d0f0;
  }

  .flow-arrow {
    font-size: 24px;
    color: #4a4a6a;
    padding: 0 8px;
    flex-shrink: 0;
  }

  /* ── 상태 전이 다이어그램 ── */
  .state-diagram {
    display: flex;
    align-items: center;
    gap: 0;
    margin: 16px 0;
    flex-wrap: wrap;
  }

  .state-box {
    padding: 14px 24px;
    border-radius: 10px;
    font-weight: 600;
    font-size: 15px;
    text-align: center;
  }
  .state-normal { background: rgba(78,205,196,0.15); color: #4ecdc4; border: 1px solid rgba(78,205,196,0.3); }
  .state-sold { background: rgba(123,127,240,0.15); color: #7b7ff0; border: 1px solid rgba(123,127,240,0.3); }
  .state-retrieve { background: rgba(240,160,75,0.15); color: #f0a04b; border: 1px solid rgba(240,160,75,0.3); }
  .state-deleted { background: rgba(240,107,107,0.15); color: #f06b6b; border: 1px solid rgba(240,107,107,0.3); }

  .state-arrow {
    padding: 0 12px;
    color: #555;
    font-size: 14px;
    text-align: center;
    line-height: 1.4;
  }
  .state-arrow .arrow-label {
    font-size: 11px;
    display: block;
    color: #666;
  }

  /* ── 정산 흐름 그림 ── */
  .settlement-flow {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 20px;
    max-width: 850px;
  }

  .settle-row {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .settle-box {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 16px 24px;
    text-align: center;
    font-size: 14px;
    font-weight: 500;
  }

  .settle-arrow {
    font-size: 22px;
    color: #4a4a6a;
  }

  /* ── 금액 예시 박스 ── */
  .example-box {
    background: rgba(123,127,240,0.08);
    border: 1px solid rgba(123,127,240,0.2);
    border-radius: 14px;
    padding: 28px 32px;
    margin-top: 20px;
    max-width: 700px;
  }

  .example-box .ex-title {
    font-size: 14px;
    font-weight: 600;
    color: #7b7ff0;
    margin-bottom: 12px;
  }

  .example-box .ex-row {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 15px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .example-box .ex-row:last-child { border-bottom: none; }
  .example-box .ex-label { color: #8888aa; }
  .example-box .ex-value { font-weight: 600; color: #d8d8f8; }
  .example-box .ex-value.total { color: #4ecdc4; font-size: 18px; }

  /* ── 테이블 ── */
  .info-table {
    border-collapse: collapse;
    margin-top: 16px;
    width: 100%;
    max-width: 900px;
  }
  .info-table th {
    background: rgba(108,114,203,0.15);
    color: #a5a8f0;
    font-size: 13px;
    font-weight: 600;
    text-align: left;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }
  .info-table td {
    font-size: 14px;
    color: #bbb;
    padding: 10px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.04);
  }

  /* ── 기술 태그 ── */
  .tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 16px;
  }

  .tech-tag {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 500;
    color: #bbb;
  }

  /* ── 2컬럼 레이아웃 ── */
  .two-col {
    display: flex;
    gap: 50px;
    margin-top: 10px;
  }
  .two-col > div { flex: 1; }

  /* ── 리스트 ── */
  .check-list {
    list-style: none;
    margin-top: 10px;
  }
  .check-list li {
    padding: 8px 0;
    font-size: 16px;
    color: #aaa;
    line-height: 1.5;
  }
  .check-list li::before {
    content: '✓';
    color: #4ecdc4;
    font-weight: 700;
    margin-right: 10px;
  }

  /* ── 진행 바 ── */
  .progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    background: linear-gradient(90deg, #6c72cb, #4ecdc4);
    transition: width 0.3s;
    z-index: 200;
  }

  /* ── 타이틀 슬라이드 배경 ── */
  .slide-cover {
    background: radial-gradient(ellipse at 30% 50%, rgba(108,114,203,0.12) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 80%, rgba(78,205,196,0.08) 0%, transparent 50%);
  }

  /* ── 머니플로우 다이어그램 ── */
  .money-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    margin: 30px 0;
  }

  .money-actor {
    text-align: center;
    min-width: 140px;
  }

  .money-actor .actor-icon {
    font-size: 48px;
    display: block;
    margin-bottom: 8px;
  }

  .money-actor .actor-name {
    font-size: 16px;
    font-weight: 700;
    color: #d0d0f0;
  }

  .money-actor .actor-sub {
    font-size: 12px;
    color: #666;
    margin-top: 2px;
  }

  .money-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 20px;
    min-width: 120px;
  }

  .money-link .link-arrow {
    font-size: 28px;
    color: #4ecdc4;
  }

  .money-link .link-label {
    font-size: 12px;
    color: #7777aa;
    margin-top: 4px;
  }

  /* ── 키보드 키 표시 ── */
  kbd {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 4px;
    padding: 2px 8px;
    font-size: 12px;
    font-family: inherit;
  }

  /* ── 반응형 ── */
  @media (max-width: 900px) {
    .slide { padding: 40px; }
    h1 { font-size: 36px; }
    h2 { font-size: 28px; }
    .cards { flex-direction: column; }
    .two-col { flex-direction: column; gap: 30px; }
  }
</style>
</head>
<body>

<div class="progress-bar" id="progressBar"></div>
<div class="page-num" id="pageNum"></div>
<div class="nav-hint"><kbd>&larr;</kbd> <kbd>&rarr;</kbd> 키로 이동</div>

<!-- ========================================================== -->
<!-- SLIDE 1: 표지 -->
<!-- ========================================================== -->
<div class="slide slide-cover active" id="slide-1">
  <div class="slide-label">Capstone Project Presentation</div>
  <h1>
    <span class="gradient-text">BookShare</span><br>
    공유서점 플랫폼
  </h1>
  <p class="subtitle">
    시민이 서점 내 책장을 임대하여<br>
    본인의 책을 직접 판매하는 공유 플랫폼
  </p>
  <div class="tech-tags" style="margin-top: 40px;">
    <span class="tech-tag">Spring Boot 3.2</span>
    <span class="tech-tag">Java 17</span>
    <span class="tech-tag">MyBatis</span>
    <span class="tech-tag">Oracle DB</span>
    <span class="tech-tag">JWT 인증</span>
    <span class="tech-tag">REST API</span>
    <span class="tech-tag">React (Frontend)</span>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 2: 서비스 개요 -->
<!-- ========================================================== -->
<div class="slide" id="slide-2">
  <div class="slide-label">Service Overview</div>
  <h2>BookShare는 <span class="highlight">어떤 서비스</span>인가?</h2>

  <p class="subtitle" style="margin-bottom: 30px;">
    동네 서점에 <span class="highlight">책장을 빌려서</span>, 내 책을 직접 팔 수 있는 플랫폼입니다.
  </p>

  <div class="money-flow">
    <div class="money-actor">
      <span class="actor-icon">👤</span>
      <span class="actor-name">책소유주</span>
      <span class="actor-sub">BookOwner</span>
    </div>
    <div class="money-link">
      <span class="link-label">임대료 납부</span>
      <span class="link-arrow">→</span>
    </div>
    <div class="money-actor">
      <span class="actor-icon">🏪</span>
      <span class="actor-name">서점 (Admin)</span>
      <span class="actor-sub">플랫폼 운영</span>
    </div>
    <div class="money-link">
      <span class="link-label">← 정산금 지급</span>
      <span class="link-arrow">←</span>
    </div>
    <div class="money-actor">
      <span class="actor-icon">👤</span>
      <span class="actor-name">책소유주</span>
      <span class="actor-sub">판매 수익</span>
    </div>
  </div>
  <div class="money-flow" style="margin-top: 0;">
    <div class="money-actor" style="min-width: 140px;"></div>
    <div class="money-link" style="min-width: 120px;"></div>
    <div class="money-actor">
      <span class="link-arrow" style="font-size: 28px; color: #f0a04b;">↑</span>
    </div>
    <div class="money-link" style="min-width: 120px;"></div>
    <div class="money-actor" style="min-width: 140px;"></div>
  </div>
  <div class="money-flow" style="margin-top: -20px;">
    <div class="money-actor" style="min-width: 140px;"></div>
    <div class="money-link" style="min-width: 120px;"></div>
    <div class="money-actor">
      <span class="actor-icon" style="font-size: 36px;">🛒</span>
      <span class="actor-name" style="font-size: 14px;">고객 (Customer)</span>
      <span class="actor-sub">책 구매</span>
    </div>
    <div class="money-link" style="min-width: 120px;"></div>
    <div class="money-actor" style="min-width: 140px;"></div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 3: 참여자 -->
<!-- ========================================================== -->
<div class="slide" id="slide-3">
  <div class="slide-label">Actors</div>
  <h2>서비스 <span class="highlight">참여자</span></h2>

  <div class="cards">
    <div class="card">
      <span class="card-icon">🔑</span>
      <h3>Admin <span style="font-size:14px; color:#f06b6b;">(서점 관리자)</span></h3>
      <p>
        책장 등록 및 관리<br>
        정산 비율 설정<br>
        책소유주 책장 배정<br>
        판매 기록 등록<br>
        <strong style="color:#d0d0f0;">정산 실행 (송금)</strong><br>
        회원/책 관리
      </p>
    </div>
    <div class="card">
      <span class="card-icon">📚</span>
      <h3>BookOwner <span style="font-size:14px; color:#4ecdc4;">(책소유주)</span></h3>
      <p>
        회원가입 (계좌 등록)<br>
        책장 임대<br>
        본인 책 진열<br>
        판매 현황 확인<br>
        <strong style="color:#d0d0f0;">정산금 수령</strong><br>
        임대 종료 시 책 회수
      </p>
    </div>
    <div class="card">
      <span class="card-icon">🛒</span>
      <h3>Customer <span style="font-size:14px; color:#f0a04b;">(고객)</span></h3>
      <p>
        회원가입<br>
        서점 방문<br>
        <strong style="color:#d0d0f0;">책 구매</strong><br>
        구매 이력 확인
      </p>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 4: 전체 서비스 플로우 요약 -->
<!-- ========================================================== -->
<div class="slide" id="slide-4">
  <div class="slide-label">Service Flow Overview</div>
  <h2>전체 <span class="highlight">서비스 플로우</span></h2>

  <div class="flow-horizontal">
    <div class="flow-h-step">
      <div class="step-label">Phase 1</div>
      <div class="step-name">시스템 설정</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step">
      <div class="step-label">Phase 2</div>
      <div class="step-name">입점</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step">
      <div class="step-label">Phase 3</div>
      <div class="step-name">책 등록 & 판매</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step">
      <div class="step-label">Phase 4</div>
      <div class="step-name">정산</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step">
      <div class="step-label">Phase 5</div>
      <div class="step-name">퇴점 & 회수</div>
    </div>
  </div>

  <div class="example-box" style="max-width: 100%; background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.08);">
    <div class="ex-title" style="color: #888;">한 줄 요약</div>
    <p style="font-size: 17px; color: #ccc; line-height: 1.8;">
      Admin이 서점 환경을 세팅하고 →
      <span class="highlight-green">책소유주가 입점</span>해서 책장에 책을 진열 →
      <span class="highlight-orange">고객이 책을 구매</span> →
      Admin이 <span class="highlight">판매 대금을 정산</span>(송금)하고 →
      계약 만료 시 <span class="highlight-red">퇴점 처리</span> 후 잔여 책을 회수
    </p>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 5: Phase 1 - 시스템 설정 -->
<!-- ========================================================== -->
<div class="slide" id="slide-5">
  <div class="slide-label">Phase 1 — System Setup</div>
  <h2>시스템 초기 설정 <span style="font-size:20px; color:#666;">(Admin)</span></h2>

  <div class="flow-vertical">
    <div class="flow-step">
      <div class="flow-num">1</div>
      <div class="flow-content">
        <div class="step-title">정산 비율 설정</div>
        <div class="step-desc">
          책이 팔렸을 때 수익을 어떻게 나눌지 비율을 정합니다.<br>
          <span style="color:#aaa;">예) 책소유주 70% : 서점 30%</span>
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">2</div>
      <div class="flow-content">
        <div class="step-title">책장 타입 등록</div>
        <div class="step-desc">
          책장의 종류와 월 임대료를 설정합니다.<br>
          <span style="color:#aaa;">예) A타입 - 월 50,000원</span>
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">3</div>
      <div class="flow-content">
        <div class="step-title">책장 등록</div>
        <div class="step-desc">
          서점 내 물리적 책장을 시스템에 등록합니다. 위치와 타입을 지정합니다.<br>
          <span style="color:#aaa;">예) 1층 A구역, A타입 책장</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 6: Phase 2 - 입점 -->
<!-- ========================================================== -->
<div class="slide" id="slide-6">
  <div class="slide-label">Phase 2 — BookOwner Onboarding</div>
  <h2>책소유주 입점 과정</h2>

  <div class="flow-vertical">
    <div class="flow-step">
      <div class="flow-num">4</div>
      <div class="flow-content">
        <div class="step-title">책소유주 회원가입</div>
        <div class="step-desc">
          기본 정보 + <strong style="color:#4ecdc4;">계좌 정보</strong>를 함께 등록합니다.<br>
          <span style="color:#aaa;">정산금을 받을 계좌가 필수이므로 가입 시 함께 등록</span>
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">5</div>
      <div class="flow-content">
        <div class="step-title">빈 책장 확인 → 책장 점유</div>
        <div class="step-desc">
          사용 가능한 책장 목록을 확인하고, 원하는 책장을 배정받습니다.<br>
          <span style="color:#aaa;">한 책장에는 한 명만 점유 가능 (동시 점유 방지)</span>
        </div>
      </div>
    </div>
  </div>

  <div class="example-box" style="margin-top: 30px;">
    <div class="ex-title">핵심 제약조건</div>
    <p style="font-size: 14px; color: #aaa; line-height: 1.7;">
      ✓ 이미 다른 사람이 사용 중인 책장은 점유 불가<br>
      ✓ 하나의 책장에 동시에 2명 이상 점유 불가 (Conditional Unique Index)<br>
      ✓ 계좌 미등록 시 추후 정산 불가
    </p>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 7: Phase 3 - 책 등록 & 판매 -->
<!-- ========================================================== -->
<div class="slide" id="slide-7">
  <div class="slide-label">Phase 3 — Book Registration & Sale</div>
  <h2>책 등록 & 판매</h2>

  <div class="two-col">
    <div>
      <h3>📖 책 등록</h3>
      <div class="flow-vertical">
        <div class="flow-step">
          <div class="flow-num">6</div>
          <div class="flow-content">
            <div class="step-title">책장에 책 등록 (일괄)</div>
            <div class="step-desc">
              <span class="step-role role-admin">ADMIN</span><br>
              본인이 점유한 책장에만 등록 가능<br>
              책 이름, 출판사, 가격, 분류 입력<br>
              등록 즉시 상태 = <strong style="color:#4ecdc4;">NORMAL</strong>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <h3>💰 책 판매</h3>
      <div class="flow-vertical">
        <div class="flow-step">
          <div class="flow-num">7</div>
          <div class="flow-content">
            <div class="step-title">고객이 책 구매</div>
            <div class="step-desc">
              <span class="step-role role-admin">ADMIN</span>
              <span class="step-role role-customer">CUSTOMER</span><br>
              NORMAL 상태인 책만 판매 가능<br>
              판매 시 상태 → <strong style="color:#7b7ff0;">SOLD</strong><br>
              판매 기록 생성 (미정산 상태)
            </div>
          </div>
        </div>
      </div>
      <div class="example-box" style="margin-top: 20px; padding: 16px 20px;">
        <div class="ex-title">판매 시점에 기록되는 것</div>
        <p style="font-size: 13px; color: #aaa; line-height: 1.7;">
          • 판매 가격 / 구매 고객 / 결제 수단<br>
          • <strong style="color:#ccc;">판매 시점의 정산 비율</strong> (나중에 비율이 바뀌어도 영향 없음)
        </p>
      </div>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 8: Book 상태 전이 -->
<!-- ========================================================== -->
<div class="slide" id="slide-8">
  <div class="slide-label">State Transition</div>
  <h2>책(Book) <span class="highlight">상태 전이</span></h2>

  <p style="font-size: 16px; color: #888; margin-bottom: 30px;">
    책은 생애주기 동안 아래 4단계 중 하나의 상태를 가집니다.
  </p>

  <div class="state-diagram">
    <div class="state-box state-normal">NORMAL<br><span style="font-size:12px; font-weight:400;">판매 가능</span></div>
    <div class="state-arrow">
      <span class="arrow-label">판매 시</span>
      →
    </div>
    <div class="state-box state-sold">SOLD<br><span style="font-size:12px; font-weight:400;">판매 완료</span></div>
  </div>

  <div class="state-diagram" style="margin-top: 8px;">
    <div class="state-box state-normal">NORMAL<br><span style="font-size:12px; font-weight:400;">판매 가능</span></div>
    <div class="state-arrow">
      <span class="arrow-label">임대 종료</span>
      →
    </div>
    <div class="state-box state-retrieve">SHOULD_BE_RETRIEVED<br><span style="font-size:12px; font-weight:400;">회수 대기</span></div>
    <div class="state-arrow">
      <span class="arrow-label">회수 완료</span>
      →
    </div>
    <div class="state-box state-deleted">Soft Delete<br><span style="font-size:12px; font-weight:400;">삭제 (기록 보존)</span></div>
  </div>

  <div class="example-box" style="margin-top: 30px;">
    <div class="ex-title">포인트</div>
    <p style="font-size: 14px; color: #aaa; line-height: 1.8;">
      ✓ 이미 <strong style="color:#7b7ff0;">SOLD</strong>된 책은 임대 종료 시에도 영향 없음 (이미 판매 완료)<br>
      ✓ <strong style="color:#f0a04b;">SHOULD_BE_RETRIEVED</strong> 상태에서만 회수 가능<br>
      ✓ 회수해도 데이터는 삭제하지 않음 → <strong style="color:#f06b6b;">Soft Delete</strong> (DELETED_AT 기록)
    </p>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 9: Phase 4 - 정산 -->
<!-- ========================================================== -->
<div class="slide" id="slide-9">
  <div class="slide-label">Phase 4 — Settlement</div>
  <h2>판매 대금 <span class="highlight">정산</span></h2>

  <p style="font-size: 16px; color: #888; margin-bottom: 20px;">
    책이 팔리면 판매 대금을 비율에 따라 나눠서 책소유주에게 송금합니다.
  </p>

  <div class="flow-vertical">
    <div class="flow-step">
      <div class="flow-num">8</div>
      <div class="flow-content">
        <div class="step-title">미정산 내역 조회</div>
        <div class="step-desc">
          아직 정산되지 않은 판매 기록을 확인합니다.<br>
          <span style="color:#aaa;">전체 조회 (Admin) / 책소유주별 조회</span>
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">9</div>
      <div class="flow-content">
        <div class="step-title">정산 실행</div>
        <div class="step-desc">
          <span class="step-role role-admin">ADMIN</span>
          선택한 판매 기록들에 대해 정산을 실행합니다.
        </div>
      </div>
    </div>
  </div>

  <div class="example-box">
    <div class="ex-title">정산 예시 — 비율 70:30, 책 2권 판매</div>
    <div class="ex-row">
      <span class="ex-label">Clean Code 판매가</span>
      <span class="ex-value">33,000원</span>
    </div>
    <div class="ex-row">
      <span class="ex-label">Refactoring 판매가</span>
      <span class="ex-value">35,000원</span>
    </div>
    <div class="ex-row" style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 4px; padding-top: 10px;">
      <span class="ex-label">총 판매 금액</span>
      <span class="ex-value">68,000원</span>
    </div>
    <div class="ex-row">
      <span class="ex-label">책소유주 정산금 (70%)</span>
      <span class="ex-value total">47,600원 → 계좌 송금</span>
    </div>
    <div class="ex-row">
      <span class="ex-label">서점 수익 (30%)</span>
      <span class="ex-value" style="color: #f0a04b;">20,400원</span>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 10: 정산 검증 -->
<!-- ========================================================== -->
<div class="slide" id="slide-10">
  <div class="slide-label">Phase 4 — Settlement Validation</div>
  <h2>정산 실행 시 <span class="highlight">검증 흐름</span></h2>

  <p style="font-size: 16px; color: #888; margin-bottom: 24px;">
    잘못된 정산을 방지하기 위해 5단계 검증을 거칩니다.
  </p>

  <div class="flow-vertical">
    <div class="flow-step">
      <div class="flow-num">1</div>
      <div class="flow-content">
        <div class="step-title">판매 기록 존재 확인</div>
        <div class="step-desc">정산할 판매 기록 ID가 비어있지 않은지</div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">2</div>
      <div class="flow-content">
        <div class="step-title">책소유주 존재 확인</div>
        <div class="step-desc">해당 bookOwnerId가 실제 존재하는 회원인지</div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">3</div>
      <div class="flow-content">
        <div class="step-title">계좌 정보 확인</div>
        <div class="step-desc">송금할 계좌가 등록되어 있는지</div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">4</div>
      <div class="flow-content">
        <div class="step-title">소유권 확인</div>
        <div class="step-desc">판매 기록이 모두 해당 책소유주의 책인지 (다른 사람 책 정산 방지)</div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">5</div>
      <div class="flow-content">
        <div class="step-title">중복 정산 방지</div>
        <div class="step-desc">이미 정산 완료된 판매 기록이 아닌지</div>
      </div>
    </div>
  </div>

  <p style="font-size: 14px; color: #555; margin-top: 16px;">
    → 검증 통과 후 금액 계산 → 토스페이먼츠 송금 → DB 기록
  </p>
</div>

<!-- ========================================================== -->
<!-- SLIDE 11: Phase 5 - 퇴점 & 회수 -->
<!-- ========================================================== -->
<div class="slide" id="slide-11">
  <div class="slide-label">Phase 5 — Unoccupy & Retrieve</div>
  <h2>퇴점 & 책 회수</h2>

  <div class="flow-vertical">
    <div class="flow-step">
      <div class="flow-num">10</div>
      <div class="flow-content">
        <div class="step-title">책장 임대 종료 (퇴점)</div>
        <div class="step-desc">
          <span class="step-role role-admin">ADMIN</span>
          하나의 트랜잭션으로 처리됩니다:<br>
          ① 점유 기록에 퇴점 시각 기록<br>
          ② 책장의 현재 점유자를 해제<br>
          ③ <strong style="color:#f0a04b;">미판매 책(NORMAL) → SHOULD_BE_RETRIEVED</strong> 상태 전환
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">11</div>
      <div class="flow-content">
        <div class="step-title">회수 대기 목록 확인</div>
        <div class="step-desc">
          회수해야 할 책 목록을 확인합니다.
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">12</div>
      <div class="flow-content">
        <div class="step-title">마지막 정산 확인 & 실행</div>
        <div class="step-desc">
          퇴점 전에 미정산 판매 기록이 있으면 정산을 먼저 처리합니다.
        </div>
      </div>
    </div>
    <div class="flow-step">
      <div class="flow-num">13</div>
      <div class="flow-content">
        <div class="step-title">책 회수 완료</div>
        <div class="step-desc">
          <span class="step-role role-admin">ADMIN</span>
          회수 대기 책들을 일괄 회수 (Soft Delete) 처리합니다.<br>
          <span style="color:#aaa;">데이터는 삭제하지 않고, DELETED_AT에 시각을 기록</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 12: 배치 정산 & 스케줄러 -->
<!-- ========================================================== -->
<div class="slide" id="slide-12">
  <div class="slide-label">Batch Settlement</div>
  <h2>자동 배치 정산 <span class="highlight">스케줄러</span></h2>

  <div class="two-col">
    <div>
      <h3>수동 정산</h3>
      <p style="font-size: 15px; color: #aaa; line-height: 1.8; margin-bottom: 20px;">
        Admin이 특정 책소유주의<br>
        특정 판매 기록을 선택해서 정산
      </p>
      <div class="settle-box" style="display:inline-block;">
        Admin → 판매 기록 선택 → 정산 실행
      </div>

      <h3 style="margin-top: 30px;">배치 정산</h3>
      <p style="font-size: 15px; color: #aaa; line-height: 1.8; margin-bottom: 20px;">
        미정산 판매 기록이 있는<br>
        <strong style="color:#ccc;">모든 책소유주를 한번에 정산</strong>
      </p>
      <div class="settle-box" style="display:inline-block;">
        Admin → 배치 정산 → 전체 자동 처리
      </div>
    </div>
    <div>
      <h3>자동 스케줄러</h3>
      <div class="example-box" style="margin-top: 0;">
        <div class="ex-title">매월 1일 오전 6:00 자동 실행</div>
        <p style="font-size: 14px; color: #aaa; line-height: 1.8;">
          Spring <code style="color:#7b7ff0;">@Scheduled(cron)</code>으로 동작<br><br>
          ① 미정산 판매 기록이 있는 책소유주 전체 조회<br>
          ② 각 책소유주별로 정산 실행<br>
          ③ 한 명이 실패해도 다음 책소유주는 계속 진행<br><br>
          <span style="color:#666;">→ 수동 개입 없이 매월 자동 정산</span>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 13: 기술 아키텍처 -->
<!-- ========================================================== -->
<div class="slide" id="slide-13">
  <div class="slide-label">Architecture</div>
  <h2>기술 <span class="highlight">아키텍처</span></h2>

  <div style="margin: 20px 0;">
    <div class="flow-horizontal">
      <div class="flow-h-step" style="background: rgba(240,160,75,0.1); border-color: rgba(240,160,75,0.3);">
        <div class="step-label" style="color:#f0a04b;">Client</div>
        <div class="step-name">React Frontend<br><span style="font-size:12px; color:#888;">브라우저</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step" style="background: rgba(123,127,240,0.1); border-color: rgba(123,127,240,0.3);">
        <div class="step-label" style="color:#7b7ff0;">Filter</div>
        <div class="step-name">JWT 인증<br><span style="font-size:12px; color:#888;">토큰 검증</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step" style="background: rgba(78,205,196,0.1); border-color: rgba(78,205,196,0.3);">
        <div class="step-label" style="color:#4ecdc4;">AOP</div>
        <div class="step-name">역할 체크<br><span style="font-size:12px; color:#888;">@RequireRole</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step">
        <div class="step-label">Controller</div>
        <div class="step-name">REST API<br><span style="font-size:12px; color:#888;">@Valid 검증</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step">
        <div class="step-label">Service</div>
        <div class="step-name">비즈니스 로직<br><span style="font-size:12px; color:#888;">@Transactional</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step">
        <div class="step-label">Mapper</div>
        <div class="step-name">MyBatis<br><span style="font-size:12px; color:#888;">XML SQL</span></div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-h-step" style="background: rgba(240,107,107,0.1); border-color: rgba(240,107,107,0.3);">
        <div class="step-label" style="color:#f06b6b;">DB</div>
        <div class="step-name">Oracle 21c<br><span style="font-size:12px; color:#888;">16 테이블</span></div>
      </div>
    </div>
  </div>

  <div class="cards" style="margin-top: 10px;">
    <div class="card" style="padding: 20px;">
      <h3 style="font-size:16px;">🔐 인증/인가</h3>
      <p style="font-size:13px;">JWT 토큰 발급 + AOP 기반<br>역할별 접근 제어 (@RequireRole)</p>
    </div>
    <div class="card" style="padding: 20px;">
      <h3 style="font-size:16px;">✅ 데이터 검증</h3>
      <p style="font-size:13px;">DTO에 Jakarta Validation 적용<br>서비스 레벨 비즈니스 검증</p>
    </div>
    <div class="card" style="padding: 20px;">
      <h3 style="font-size:16px;">🔄 트랜잭션</h3>
      <p style="font-size:13px;">@Transactional로 데이터 정합성<br>실패 시 자동 롤백</p>
    </div>
    <div class="card" style="padding: 20px;">
      <h3 style="font-size:16px;">💳 외부 연동</h3>
      <p style="font-size:13px;">토스페이먼츠 송금 API<br>Profile로 Mock/실제 전환</p>
    </div>
    <div class="card" style="padding: 20px;">
      <h3 style="font-size:16px;">🗑️ Soft Delete</h3>
      <p style="font-size:13px;">회원/책 삭제 시 물리 삭제 없이<br>DELETED_AT으로 논리 삭제</p>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 14: DB 구조 -->
<!-- ========================================================== -->
<div class="slide" id="slide-14">
  <div class="slide-label">Database</div>
  <h2>DB <span class="highlight">테이블 구조</span> <span style="font-size:20px; color:#666;">(16개 테이블)</span></h2>

  <div class="two-col">
    <div>
      <table class="info-table">
        <tr><th colspan="2">사용자 & 인증</th></tr>
        <tr><td style="color:#7b7ff0;">USERS</td><td>통합 사용자 (4개 역할)</td></tr>
        <tr><td style="color:#7b7ff0;">CUSTOMER</td><td>고객 서브타입 (1:1)</td></tr>
        <tr><td style="color:#7b7ff0;">BOOK_OWNER</td><td>책소유주 서브타입 (1:1)</td></tr>
        <tr><td style="color:#7b7ff0;">ADDRESS</td><td>주소 (1:1)</td></tr>
        <tr><td style="color:#7b7ff0;">BANK_ACCOUNT</td><td>계좌 정보 (1:1)</td></tr>
      </table>

      <table class="info-table" style="margin-top: 20px;">
        <tr><th colspan="2">설정 & 코드</th></tr>
        <tr><td style="color:#4ecdc4;">SETTLEMENT_RATIO</td><td>정산 비율 이력</td></tr>
        <tr><td style="color:#4ecdc4;">BOOK_CASE_TYPE</td><td>책장 타입 (임대료)</td></tr>
        <tr><td style="color:#4ecdc4;">COMMON_CODE</td><td>공통 코드 마스터</td></tr>
      </table>
    </div>
    <div>
      <table class="info-table">
        <tr><th colspan="2">책장 & 도서</th></tr>
        <tr><td style="color:#f0a04b;">BOOK_CASE</td><td>책장</td></tr>
        <tr><td style="color:#f0a04b;">BOOK_CASE_OCCUPIED_RECORD</td><td>점유 이력</td></tr>
        <tr><td style="color:#f0a04b;">BOOK</td><td>도서 (상태 관리)</td></tr>
        <tr><td style="color:#f0a04b;">BOOK_SALE_RECORD</td><td>판매 기록</td></tr>
      </table>

      <table class="info-table" style="margin-top: 20px;">
        <tr><th colspan="2">정산 & 임대</th></tr>
        <tr><td style="color:#f06b6b;">BOOK_OWNER_SETTLEMENT</td><td>판매 정산</td></tr>
        <tr><td style="color:#f06b6b;">RENTAL_SETTLEMENT</td><td>임대료 관리</td></tr>
        <tr><td style="color:#f06b6b;">DEPOSIT</td><td>보증금</td></tr>
        <tr><td style="color:#f06b6b;">DEPOSIT_RENTAL_OFFSET</td><td>보증금 상계 내역</td></tr>
      </table>
    </div>
  </div>
</div>

<!-- ========================================================== -->
<!-- SLIDE 15: API 현황 -->
<!-- ========================================================== -->
<div class="slide" id="slide-15">
  <div class="slide-label">API Summary</div>
  <h2>REST API <span class="highlight">현황</span></h2>

  <div class="cards">
    <div class="card" style="text-align:center; padding: 24px;">
      <span class="card-icon" style="font-size:48px;">48</span>
      <h3 style="font-size:16px; margin-top:4px;">API 엔드포인트</h3>
    </div>
    <div class="card" style="text-align:center; padding: 24px;">
      <span class="card-icon" style="font-size:48px;">12</span>
      <h3 style="font-size:16px; margin-top:4px;">컨트롤러</h3>
    </div>
    <div class="card" style="text-align:center; padding: 24px;">
      <span class="card-icon" style="font-size:48px;">141</span>
      <h3 style="font-size:16px; margin-top:4px;">테스트 케이스</h3>
    </div>
    <div class="card" style="text-align:center; padding: 24px;">
      <span class="card-icon" style="font-size:48px;">4</span>
      <h3 style="font-size:16px; margin-top:4px;">역할 (Role)</h3>
    </div>
  </div>

  <table class="info-table" style="margin-top: 24px;">
    <tr>
      <th>컨트롤러</th>
      <th>주요 기능</th>
      <th>역할</th>
    </tr>
    <tr><td>Auth</td><td>로그인, 회원가입 (BookOwner / Customer)</td><td>공개</td></tr>
    <tr><td>BookCaseType</td><td>책장 타입 CRUD</td><td>ADMIN</td></tr>
    <tr><td>BookCase</td><td>책장 등록, 점유/퇴점, 책 등록</td><td>ADMIN</td></tr>
    <tr><td>BookOwner</td><td>책소유주 조회 (책, 판매, 정산)</td><td>ADMIN / BOOK_OWNER</td></tr>
    <tr><td>Book</td><td>전체 책 조회, 회수</td><td>ALL / ADMIN</td></tr>
    <tr><td>BookSaleRecord</td><td>판매 기록</td><td>ADMIN</td></tr>
    <tr><td>Settlement</td><td>정산 조회/실행/배치</td><td>ADMIN</td></tr>
    <tr><td>RentalSettlement</td><td>임대료 조회/납부</td><td>ADMIN / BOOK_OWNER</td></tr>
    <tr><td>User / Customer</td><td>회원 관리 (수정, 삭제)</td><td>ADMIN</td></tr>
    <tr><td>CommonCode</td><td>공통 코드 조회</td><td>공개</td></tr>
  </table>
</div>

<!-- ========================================================== -->
<!-- SLIDE 16: 시현 안내 -->
<!-- ========================================================== -->
<div class="slide slide-cover" id="slide-16">
  <div class="slide-label">Live Demo</div>
  <h1>
    <span class="gradient-text">라이브 시현</span>
  </h1>
  <p class="subtitle" style="margin-bottom: 30px;">
    이제 실제 프론트엔드를 통해<br>
    전체 서비스 플로우를 시현하겠습니다.
  </p>

  <div class="flow-horizontal" style="margin-top: 10px;">
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 1</div>
      <div class="step-name" style="font-size:13px;">시스템 설정</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 2</div>
      <div class="step-name" style="font-size:13px;">입점</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 3</div>
      <div class="step-name" style="font-size:13px;">책 등록</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 4</div>
      <div class="step-name" style="font-size:13px;">판매</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 5</div>
      <div class="step-name" style="font-size:13px;">정산</div>
    </div>
    <div class="flow-arrow">→</div>
    <div class="flow-h-step" style="min-width:100px;">
      <div class="step-label">Step 6</div>
      <div class="step-name" style="font-size:13px;">퇴점 & 회수</div>
    </div>
  </div>
</div>

<script>
  const slides = document.querySelectorAll('.slide');
  let current = 0;

  function showSlide(n) {
    slides[current].classList.remove('active');
    current = (n + slides.length) % slides.length;
    slides[current].classList.add('active');
    document.getElementById('pageNum').textContent = `${current + 1} / ${slides.length}`;
    document.getElementById('progressBar').style.width = `${((current + 1) / slides.length) * 100}%`;
  }

  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'PageDown') {
      e.preventDefault();
      showSlide(current + 1);
    } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
      e.preventDefault();
      showSlide(current - 1);
    } else if (e.key === 'Home') {
      e.preventDefault();
      showSlide(0);
    } else if (e.key === 'End') {
      e.preventDefault();
      showSlide(slides.length - 1);
    }
  });

  // 터치 지원
  let touchStartX = 0;
  document.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; });
  document.addEventListener('touchend', (e) => {
    const diff = touchStartX - e.changedTouches[0].clientX;
    if (Math.abs(diff) > 50) {
      diff > 0 ? showSlide(current + 1) : showSlide(current - 1);
    }
  });

  // 초기화
  showSlide(0);
</script>

</body>
</html>
